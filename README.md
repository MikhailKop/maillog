# Разбор файла почтового лога

## Обзор

Файл почтового лога maillog размещается в папке проекта /apps/etl/. 

При запуске проекта создаются и запускаются четыре Docker-контейнера:

  - db (Postgresql, при инициализации создается схема с таблицами из задания, описанная в database_dump.sql);  
  - etl (подключается к Postgresql, данные из файла помещаются в таблицы);
  - django (бэкенд на Django для поиска логов по адресу получателя);
  - nginx;

## Как запустить проект:

### Файл .env:

Переименуйте файл .env.template в .env в корневой папке проекта.

### Запуск продового приложения (используйте docker-compose)

Выполните команду:

`docker compose -f "docker-compose.yml" up -d --build`

---

**URLs:**

* [http://127.0.0.1/maillog](http://127.0.0.1/maillog)

---

### Остановка контейнеров выполняется командой:

`docker compose -f "docker-compose.yml" down`

### Примечания:

Согласно пояснению к задаче за адрес получателя принимается значение поля, идущего за полем "флаг" (за исключением значения после флага <=). 
Созданный сервис etl возможно использовать для постоянного пополнения БД новыми записями, вносимыми в maillog (достигается путем записи состояний файла). Для etl реализована функция backoff, необходимая для восстановления связи с Postgres в случае разрыва. 